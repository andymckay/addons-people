{% extends "layout.html" %}
{% block body %}
  <h2>Reviews requested</h2>
  <p>&laquo; <a href="index.html">back to team list</a></p>
  <div class="panel panel-default">
    <div class="panel-body">
      <p>Bugs with review? set to a team member.</p>
    </div>
    <table class="table table-hover table-striped">
      <thead>
        <tr>
          <th>Created</th>
          <th>Bug #</th>
          <th>Bug Summary</th>
          <th>Reviewer</th>
          <th>Requester</th>
      </thead>
      <tbody>
      {% for record in reviews %}
        <tr>
          <td>{{ record.Created }}<br><span class="ago label" data-date="{{ record.Created }}"></span></td>
          <td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id={{ record['Bug ID'] }}">{{ record['Bug ID'] }}</td>
          <td>{{ record['Summary'] }}</td>
          <td>{{ record['Requestee'] }}</td>
          <td>{{ record['Requester'] }}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
{% block scripts %}
  <script src="moment.min.js"></script>
  <script src="moment-timezone-with-data-2010-2020.js"></script>
  <script src="moment-timezone.min.js"></script>
  <script style="text/javascript">
    function update() {
      for (let ago of document.getElementsByClassName("ago")) {
        ago.innerText = moment(ago.dataset.date, 'YYYY-MM-DD').fromNow();
        if (ago.innerText.endsWith('days ago') || ago.innerText.endsWith('hours ago')) {
          ago.classList.add('label-success');
        } else {
          ago.classList.add('label-warning');
        }
      }
    };
    update();
    setInterval(update, 6000);
  </script>
{% endblock %}
